/**
  ******************************************************************************
  * @file stm8s_mib_wwdg.c
  * @brief Function to calculate wwdg time delay...
  * @author MYMEDIA Co., Ltd.
  * @version V1.0.0
  * @date 2023.1.6
  ******************************************************************************
  */

/* Includes ------------------------------------------------------------------*/
#include "stm8s.h"
#include "stm8s_mib_vsprintf.h"
/* Private typedef -----------------------------------------------------------*/
/* Private define ------------------------------------------------------------*/
/* Private macro -------------------------------------------------------------*/
/* Private variables ---------------------------------------------------------*/
/* Private function prototypes -----------------------------------------------*/
/* Private functions ---------------------------------------------------------*/
/* Global variables ----------------------------------------------------------*/
/* Public functions ----------------------------------------------------------*/
#define _DEBUG_WWDG_A_ 1
uint16_t calConfigWWDG(uint16_t vwDelay); // msec... 

#define rd_ADDR8(A)     (*((volatile uint8_t *)(A)))
//----------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------
/**
  * @brief 
  * @par Parameters:
  * vwDelay: window watchdog delay msec 
  * @retval Return value:
  * None
  * STM8S Reference Manuals : <https://www.st.com/resource/en/reference_manual/rm0016-stm8s-series-and-stm8af-series-8bit-microcontrollers-stmicroelectronics.pdf>
  * page 128.
  **/
//----------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------
uint16_t calConfigWWDG(uint16_t vwDelay) // msec... 
{
	uint32_t vdwData = vwDelay;
	if(vwDelay>50)
	{
		vdwData = 0x3F;
	}
	else
	{
		vdwData = vdwData * 16000000;
		vdwData = vdwData / 12288;
		vdwData = vdwData / 1000;
	}
	vwDelay = vdwData;
	ccprintf(_DEBUG_WWDG_A_, ("calConfigWWDG : [%u][0x%x]\r\n",vwDelay));		 
	return vwDelay;
}
//----------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------


